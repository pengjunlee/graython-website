import{_ as H,g as A,r as ce,t as xe}from"./index-B2YTKe62.js";import"./request_website-DUcM358L.js";import{t as we,_ as Me}from"./Header.vue_vue_type_style_index_0_lang-DwRAb1A7.js";import{b as z,E as re,c as Re}from"./element-plus-8efUW2IF.js";import{e as Te}from"./@vueuse-DVUPgnhb.js";import{e as y}from"./mitt-CJohXFwE.js";import{d as T,o as u,c as _,L as b,P as R,u as m,V as N,r as o,Q as I,a as t,S as Ce,$ as Se,I as Le,b as O,at as de,au as me,h as Ie,G as $e,Z as ue,_ as fe,U as D,M as Ee,g as Pe,w as Be,ah as Ae,R as De,av as He}from"./@vue-BV9Q_yhH.js";import{s as M}from"./screenfull-DmVOzVZz.js";import{r as ze}from"./music-CsXmfQ1i.js";import"./pinia-CWZPuNdE.js";import"./axios-Cm0UX6qg.js";import"./vue-router-DaOdIdNP.js";import"./vue-pdf-embed-BcRweBTn.js";import"./lodash-es-BDpUAi6D.js";import"./async-validator-DKvM95Vc.js";import"./dayjs-Dc0JWrkO.js";import"./@element-plus-DgtNr1CL.js";import"./@ctrl-D_sRHO8g.js";import"./@popperjs-D9SI2xQl.js";import"./auth-ChUAg2vx.js";import"./mitt-DJ65BbbF.js";const Ne={key:0,class:"iconfont icon-sun"},Ue={key:1,class:"iconfont icon-moon"},Xe=T({__name:"index",setup(p){let v=Te();const f=()=>{v.value=!v.value,y.emit("dayNightChanged",v.value)};return(a,d)=>{const c=z;return u(),_("div",{style:{"margin-bottom":"1rem"},onClick:f},[b(c,{effect:"light",content:"日夜切换",placement:"left"},{default:R(()=>[m(v)?(u(),_("span",Ne)):(u(),_("span",Ue))]),_:1})])}}}),je={key:0,class:"iconfont icon-a-ScreenShrink"},Fe={key:1,class:"iconfont icon-a-ScreenExpand"},Ve=T({__name:"index",setup(p){function v(){M.isEnabled?M.isFullscreen?(re.success("退出网页全屏"),M.exit()):(re.success("进入网页全屏"),M.toggle()):Re.alert("浏览器不支持全屏","提示",{confirmButtonText:"确定",type:"warning"})}return(f,a)=>{const d=z;return m(M).isEnabled?(u(),_("div",{key:0,style:{"margin-bottom":"1rem"},onClick:a[0]||(a[0]=c=>v())},[b(d,{effect:"light",content:"全屏切换",placement:"left"},{default:R(()=>[m(M).isFullscreen?(u(),_("span",je)):(u(),_("span",Fe))]),_:1})])):N("",!0)}}}),We=H(Ve,[["__scopeId","data-v-267e6f9e"]]),Ye=T({__name:"index",props:{fontSize:{type:String,default:"3rem"}},setup(p){const v=o(0);window.addEventListener("scroll",we(()=>{v.value=window.scrollY||document.documentElement.scrollTop||document.body.scrollTop||0},100));function f(){window.scrollTo({top:0,behavior:"smooth"})}return(a,d)=>{const c=z;return u(),I(Se,{name:"el-zoom-in-bottom"},{default:R(()=>[m(v)>=800?(u(),_("div",{key:0,style:{"margin-top":"1rem"},onClick:f},[b(c,{effect:"light",content:"回到顶部",placement:"left"},{default:R(()=>[t("span",{style:Ce({fontSize:p.fontSize}),class:"iconfont icon-caps-unlock-filling"},null,4)]),_:1})])):N("",!0)]),_:1})}}}),qe=p=>(de("data-v-3a2f21cc"),p=p(),me(),p),Ge={class:"toolbox_div"},Ke=qe(()=>t("span",{id:"menu-icon",class:"iconfont icon-menu"},null,-1)),Oe={class:"mb-4"},Qe=T({__name:"index",props:{toTop:{type:Boolean,default:!1}},emits:["ReadingMode"],setup(p,{emit:v}){const f=o(),a=p,{toTop:d}=Le(a),c=o(!1),h=()=>{g(),c.value?(c.value=!1,f.value.classList.add("hide")):(c.value=!0,f.value.classList.remove("hide"))},g=()=>{const s=document.getElementById("menu-icon");s==null||s.classList.add("active"),setTimeout(function(){s==null||s.classList.remove("active")},1e3)};return O(()=>{console.log(d.value)}),(s,C)=>{const x=z;return u(),_("div",Ge,[t("div",{ref_key:"moreRef",ref:f,class:"hide"},[b(Xe),b(We)],512),t("div",{class:"rotate-box",onClick:h},[b(x,{effect:"light",content:"更多功能",placement:"left"},{default:R(()=>[Ke]),_:1})]),t("div",Oe,[m(d)?(u(),I(Ye,{key:0})):N("",!0)])])}}}),Ze=H(Qe,[["__scopeId","data-v-3a2f21cc"]]),pe=p=>(de("data-v-7d84489d"),p=p(),me(),p),Je={class:"music-player-top"},et={class:"music-player"},tt={class:"top-bar"},st=pe(()=>t("span",{class:"iconfont icon-24gl-volumeMiddle"},null,-1)),nt=["src"],ot={class:"lyric-wrapper"},it={class:"info-right"},at={class:"music-name"},lt={class:"playback-setting"},ct=pe(()=>t("span",{class:"duration-bar play-duration"},null,-1)),rt={class:"music-disc"},ut=["src"],ft={class:"info-box"},dt={class:"info"},mt={class:"text-sm whitespace-nowrap"},pt={class:"text-sm whitespace-nowrap"},vt=T({__name:"index",setup(p,{expose:v}){const f=o(!1),a=o({id:"",name:"",src:"",img:"./favicon.png",artist:"",lyrics:""}),d=o([]),c=o(!1),h=o(),g=o(!1),s=o(),C=o(),x=o(),$=o(),S=o(),U=o(),X=o(),j=o(),F=o(),Q=o(),V=o(),ve=o(),W=o(),Y=o(!0);Ie(()=>"./favicon.png");let q,Z,k=0;function _e(){q&&clearInterval(q),Z=s.value.duration,q=setInterval(function(){J()},1e3)}function J(){if(c.value&&F.value){F.value.style.width=s.value.currentTime/s.value.duration*100+"%";let e=s.value.duration-s.value.currentTime,n=parseInt(String(e/60)),r=parseInt(String(e%60)),i=`${n<10?"0"+n:n}:${r<10?"0"+r:r}`;Q.value.innerHTML=i,ee()}}let L=[],E=[];function ee(){if(g.value){let e=G(L,Math.floor(s.value.currentTime));e<0&&(e=0),S.value.style.top=e*-21+150+"px",[...S.value.children].forEach(n=>{n.style.color="var(--gw-bg-font)"}),S.value.children[e].style.color="aqua"}}function te(){let e="";L=[],E=[];let n=a==null?void 0:a.value.lyrics;if(!n)e+="<li>未发现歌词</li>",L=[0];else try{n.split(`
`).forEach(i=>{const l=i.split("::");L.push(l[0]),E.push(l[1]),e+=`<li>${E[E.length-1]}</li>`})}catch{e+="<li>歌词格式不正确</li>",L=[0]}c.value&&(S.value.innerHTML=e)}function P(e){if(k=e,d.value.length>0){let n=d.value[e];a.value=n,s.value.src=n.src,y.emit("musicChanged",a.value),Y.value=!0,c.value&&($.value.innerHTML=n.artist,x.value.innerHTML=n.title,g.value&&te())}}function w(){s.value.play(),f.value=!0}function se(){s.value.pause(),f.value=!1}function ne(){k==0?k=d.value.length-1:k--,P(k),w()}function B(){k==d.value.length-1?k=0:k++,P(k),w()}function G(e,n,r=0,i=e.length-1){if(r>i)return r-1;const l=Math.floor((r+i)/2);return e[l]===n?l:e[l]>n?G(e,n,r,l-1):G(e,n,l+1,i)}function ye(){Y.value&&(te(),Y.value=!1),g.value?(U.value.style.display="flex",j.value.style.display="none",X.value.style.width="40%",g.value=!1):(U.value.style.display="block",j.value.style.display="block",X.value.style.width="100%",g.value=!0)}function he(e){s.value.currentTime=e.offsetX/e.target.offsetWidth*Z,J()}function ge(e){s.value.volume=e.offsetX/e.target.offsetWidth,V.value.style.width=e.offsetX/e.target.offsetWidth*100+"%"}function ke(){let e=W.value.offsetWidth;document.onmousemove=function(n){let i=(n||event).clientX-W.value.getBoundingClientRect().left;i>e?i=e:i==0&&(i=0),V.value.style.width=i/e*100+"%",s.value.volume=i/e},document.onmouseup=function(){document.onmousemove=null,document.onmouseup=null}}const K=o(!1);let oe=0,ie=0;const be=e=>{if(K.value=!0,h.value){let n=h.value.getBoundingClientRect();oe=n.width,ie=n.height}document.addEventListener("mousemove",ae),document.addEventListener("mouseup",le)},ae=e=>{K.value&&h.value&&(h.value.style.left=e.clientX+oe/2-18+"px",h.value.style.top=e.clientY+ie/2-18.75+"px")},le=()=>{K.value=!1,document.removeEventListener("mousemove",ae),document.removeEventListener("mouseup",le)};return O(()=>{const e=Pe();e&&(window._MusicPlayer=e.proxy),ze(5).then(n=>{let r=n.data.map(i=>({id:i.id,name:i.title,src:A()+i.previewUrl.replace("//","/"),img:i.artistThumbnail?A()+i.artistThumbnail:"./favicon.png",artist:i.artist,lyrics:i.lyrics}));d.value.unshift(...r),P(0)}),y.on("playMusic",()=>{w()}),y.on("previousMusic",()=>{ne()}),y.on("nextMusic",()=>{B()}),y.on("setMusic",n=>{P(n)}),y.on("playSelectedMusic",n=>{let r=n.map(l=>({id:l.id,name:l.title,src:A()+l.previewUrl.replace("//","/"),img:l.artistThumbnail?A()+l.artistThumbnail:"./favicon.png",artist:l.artist,lyrics:l.lyrics}));const i=new Set(r.map(l=>l.id));d.value=d.value.filter(l=>!i.has(l.id)),d.value.unshift(...r)})}),$e(()=>{delete window._MusicPlayer,y.off("playMusic"),y.off("previousMusic"),y.off("nextMusic"),y.off("setMusic"),y.off("playSelectedMusic")}),v({playMusic:w}),(e,n)=>{var r,i;return u(),_(Ee,null,[ue(t("div",{ref_key:"musicPlayerRef",ref:h,class:"music-player-wrapper"},[t("div",Je,[t("span",{onMousedown:be,class:"iconfont icon-hand"},null,32),t("span",{onClick:n[0]||(n[0]=l=>c.value=!1),class:"iconfont icon--"})]),t("div",et,[t("div",tt,[st,t("div",{ref_key:"soundProgressBarRef",ref:W,class:"progress-bar sound-progress-bar"},[t("span",{onClick:ge,class:"duration-bar sound-duration"}),t("span",{ref_key:"soundProgressRef",ref:V,class:"progress sound-progress"},[t("span",{onMousedown:ke,ref_key:"roundRef",ref:ve,class:"round"},null,544)],512)],512),t("span",{class:"iconfont icon-geciweidianji",onClick:ye})]),t("div",{ref_key:"musicInfoRef",ref:U,class:"music-info"},[t("div",{ref_key:"infoLeftRef",ref:X,class:"info-left"},[t("img",{ref_key:"musicImgRef",ref:C,class:"music-img",alt:"",src:m(a).img,onerror:"this.src='./favicon.png';"},null,8,nt),t("div",{ref_key:"lyricMaskRef",ref:j,class:"lyric-mask"},[t("div",ot,[t("ul",{ref_key:"lyricContentRef",ref:S,id:"lyc-content",style:{top:"100px"}},null,512)])],512)],512),t("div",it,[t("div",at,[t("span",{ref_key:"musicNameRef",ref:x,class:"name"},D(m(a).name||"放首歌听听吧"),513),t("span",{ref_key:"musicAuthorRef",ref:$,class:"musician"},D(m(a).artist||""),513)]),t("div",lt,[t("span",{onClick:ne,class:"iconfont icon-next previous"}),m(f)?(u(),_("span",{key:0,onClick:se,class:"iconfont icon-zanting1"})):(u(),_("span",{key:1,onClick:w,class:"iconfont icon-bofang"})),t("span",{onClick:B,class:"iconfont icon-next next"})])])],512),t("div",{onClick:he,class:"progress-bar player-progress-bar"},[ct,t("span",{ref_key:"playerProgressRef",ref:F,class:"progress player-progress"},null,512),t("span",{ref_key:"musicTimeRef",ref:Q,class:"time"},"00:00",512)])])],512),[[fe,m(c)]]),ue(t("div",rt,[t("img",{onClick:n[1]||(n[1]=l=>c.value=!m(c)),class:"music-img",src:m(a).img,alt:"musician logo",onerror:"this.src='./favicon.png';"},null,8,ut),t("div",ft,[t("div",dt,[t("div",mt,D(((r=m(a))==null?void 0:r.name)||"放首歌来听吧"),1),t("div",pt,D((i=m(a))==null?void 0:i.artist),1)]),t("span",{onClick:B,style:{"margin-right":"1rem"},class:"iconfont icon-next"}),m(f)?(u(),_("span",{key:0,onClick:se,class:"iconfont icon-zanting1"})):(u(),_("span",{key:1,onClick:w,class:"iconfont icon-bofang"}))])],512),[[fe,!m(c)]]),t("audio",{src:"",ref_key:"audioRef",ref:s,onTimeupdate:ee,onCanplay:_e,onEnded:B},null,544)],64)}}}),_t=H(vt,[["__scopeId","data-v-7d84489d"]]),yt={id:"index-layout",class:"layout-root-container"},ht=T({__name:"Index",setup(p){const v=o([{icon:"icon-wangzhanshouye",name:"Home",title:"首页"},{icon:"icon-Bloggericon",name:"Articles",title:"博文"},{icon:"icon-wangzhantubiao",name:"Links",title:"导航"},{icon:"icon-heji",name:"Resource",title:"资源"},{icon:"icon-dianying",name:"Movie",title:"影院"},{icon:"icon-18erji-2",name:"Music",title:"音乐"}]),f=o("Home"),a=o(["Home"]),d=o("Home");O(async()=>{}),Be(()=>ce.currentRoute.value,s=>{s.name&&(d.value=s.name,f.value=s.name.toString()),s.meta.keepAlive&&a.value.indexOf(s.name)===-1&&a.value.push(s.name)},{immediate:!0});const c=["Login"],h=()=>{const s=ce.currentRoute.value;return!(s!=null&&s.name&&c.find(C=>C===s.name))},g=s=>{f.value=s,xe(s)};return(s,C)=>{const x=Ae("router-view");return u(),_("div",yt,[h()?(u(),I(Me,{key:0,tabs:v.value,selectedTab:f.value,"onUpdate:selectedTab":g},null,8,["tabs","selectedTab"])):N("",!0),b(x,null,{default:R(({Component:$})=>[(u(),I(He,{include:[a.value]},[(u(),I(De($)))],1032,["include"]))]),_:1}),b(Ze,{toTop:!0}),b(_t)])}}}),Ut=H(ht,[["__scopeId","data-v-4326138d"]]);export{Ut as default};
